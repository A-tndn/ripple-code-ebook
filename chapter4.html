<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 4: Distortions and Neutrality - The Ripple Code</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <nav class="chapter-nav">
            <a href="chapter3.html" class="prev">‚Üê Chapter 3</a>
            <a href="index.html" class="home">Home</a>
            <a href="chapter5.html" class="next">Chapter 5 ‚Üí</a>
        </nav>

        <header>
            <h1>Chapter 4: Distortions and Neutrality</h1>
            <p class="subtitle">How to Keep Your Ripples Pure and Powerful!</p>
        </header>

        <main>
            <section class="simple-intro">
                <h2>üéØ What Are Distortions?</h2>

                <div class="simple-explanation">
                    <p>Imagine trying to look at yourself in a funhouse mirror - everything looks twisted and weird! Distortions are like funhouse mirrors for your ripples. They twist your message as it travels, making echoes come back different than what you intended.</p>

                    <div class="mirror-demo">
                        <div class="mirrors-comparison">
                            <div class="normal-mirror">
                                <h3>ü™û Clear Mirror</h3>
                                <div class="mirror-reflection">
                                    <div class="original">üòä "You're awesome!"</div>
                                    <div class="reflection">üòä "You're awesome!"</div>
                                </div>
                                <p>Perfect reflection!</p>
                            </div>

                            <div class="funhouse-mirror">
                                <h3>üé™ Distorted Mirror</h3>
                                <div class="mirror-reflection">
                                    <div class="original">üòä "You're awesome!"</div>
                                    <div class="reflection distorted">üòï "Did they mean that sarcastically?"</div>
                                </div>
                                <p>Message got twisted!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="distortion-types">
                <h2>üå™Ô∏è The 5 Types of Distortions</h2>

                <div class="distortion-grid">
                    <div class="distortion-card emotion">
                        <div class="distortion-icon">üò†</div>
                        <h3>Emotional Distortion</h3>
                        <p><strong>What it is:</strong> When you're feeling angry, sad, or excited, those emotions get mixed into your ripples</p>
                        <div class="example">
                            <strong>Example:</strong> You're frustrated about homework and say "Thanks for helping" but it sounds sarcastic
                        </div>
                        <div class="fix">
                            <strong>Fix:</strong> Take 3 deep breaths before speaking when you're emotional
                        </div>
                    </div>

                    <div class="distortion-card noise">
                        <div class="distortion-icon">üîä</div>
                        <h3>Noise Distortion</h3>
                        <p><strong>What it is:</strong> When there's too much going on around you, your message gets lost in the chaos</p>
                        <div class="example">
                            <strong>Example:</strong> Trying to apologize in a noisy cafeteria where no one can hear properly
                        </div>
                        <div class="fix">
                            <strong>Fix:</strong> Choose quiet, calm moments for important messages
                        </div>
                    </div>

                    <div class="distortion-card gossip">
                        <div class="distortion-icon">üó£Ô∏è</div>
                        <h3>Gossip Distortion</h3>
                        <p><strong>What it is:</strong> When your message passes through many people, each person changes it a little</p>
                        <div class="example">
                            <strong>Example:</strong> "I like their new haircut" becomes "Did you hear what they said about your hair?"
                        </div>
                        <div class="fix">
                            <strong>Fix:</strong> Speak directly to the person when possible
                        </div>
                    </div>

                    <div class="distortion-card timing">
                        <div class="distortion-icon">‚è∞</div>
                        <h3>Timing Distortion</h3>
                        <p><strong>What it is:</strong> When you say something at the wrong time, the timing changes how it's received</p>
                        <div class="example">
                            <strong>Example:</strong> Giving feedback right after someone failed a test vs. when they're feeling confident
                        </div>
                        <div class="fix">
                            <strong>Fix:</strong> Pay attention to how the other person is feeling before speaking
                        </div>
                    </div>

                    <div class="distortion-card assumption">
                        <div class="distortion-icon">ü§î</div>
                        <h3>Assumption Distortion</h3>
                        <p><strong>What it is:</strong> When people guess what you mean instead of hearing what you actually said</p>
                        <div class="example">
                            <strong>Example:</strong> "Let's talk later" is assumed to mean "I'm angry at you"
                        </div>
                        <div class="fix">
                            <strong>Fix:</strong> Be specific and clear about what you mean
                        </div>
                    </div>
                </div>
            </section>

            <section class="neutrality-power">
                <h2>‚ö° The Power of Neutrality</h2>

                <div class="neutrality-explanation">
                    <h3>üßò‚Äç‚ôÇÔ∏è What Is Neutrality?</h3>
                    <p>Neutrality is like being a calm lake on a still day. When you're neutral, your ripples travel pure and clear, without being twisted by emotions or distractions.</p>

                    <div class="neutrality-demo">
                        <div class="states-comparison">
                            <div class="non-neutral">
                                <h4>üò§ Not Neutral</h4>
                                <div class="lake-surface choppy">
                                    <div class="waves"></div>
                                    <div class="ripple-text">Message gets mixed with emotions</div>
                                </div>
                            </div>

                            <div class="neutral">
                                <h4>üòå Neutral</h4>
                                <div class="lake-surface calm">
                                    <div class="clean-ripples"></div>
                                    <div class="ripple-text">Message travels pure and clear</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="neutrality-benefits">
                        <h4>üåü Why Neutrality is Super Powerful:</h4>
                        <div class="benefits-list">
                            <div class="benefit">üíé Your message arrives exactly as you intended</div>
                            <div class="benefit">üéØ People focus on your words, not your emotions</div>
                            <div class="benefit">ü§ù Others feel safe to respond honestly</div>
                            <div class="benefit">üîÑ You get cleaner, more helpful echoes back</div>
                            <div class="benefit">üß† You can think more clearly and make better decisions</div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="neutrality-training">
                <h2>üèãÔ∏è Neutrality Training Game</h2>

                <div class="training-interface">
                    <h3>The Emotional Control Challenge</h3>
                    <p>Practice staying neutral in different situations. Choose the most neutral response!</p>

                    <div class="scenario-container">
                        <div id="neutrality-scenario" class="scenario-display">
                            <!-- Training scenarios load here -->
                        </div>

                        <div class="response-options">
                            <div id="response-buttons" class="response-grid">
                                <!-- Response buttons load here -->
                            </div>
                        </div>

                        <button onclick="checkNeutralAnswer()" class="check-neutral-btn">Check My Response! üéØ</button>

                        <div id="neutral-feedback" class="neutral-feedback"></div>

                        <div class="training-controls">
                            <button onclick="nextNeutralScenario()" class="next-neutral-btn">Next Scenario ‚Üí</button>
                            <div id="neutral-score" class="neutral-score">Neutrality Score: 0/0</div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="distortion-detector">
                <h2>üîç Distortion Detective Game</h2>

                <div class="detector-interface">
                    <h3>Spot the Distortion!</h3>
                    <p>Read each ripple story and identify what type of distortion happened.</p>

                    <div class="detection-game">
                        <div id="distortion-story" class="story-display">
                            <!-- Distortion stories load here -->
                        </div>

                        <div class="distortion-options">
                            <button onclick="selectDistortion('emotional')" class="distortion-btn" id="emotionalBtn">
                                üò† Emotional Distortion
                            </button>
                            <button onclick="selectDistortion('noise')" class="distortion-btn" id="noiseBtn">
                                üîä Noise Distortion
                            </button>
                            <button onclick="selectDistortion('gossip')" class="distortion-btn" id="gossipBtn">
                                üó£Ô∏è Gossip Distortion
                            </button>
                            <button onclick="selectDistortion('timing')" class="distortion-btn" id="timingBtn">
                                ‚è∞ Timing Distortion
                            </button>
                            <button onclick="selectDistortion('assumption')" class="distortion-btn" id="assumptionBtn">
                                ü§î Assumption Distortion
                            </button>
                        </div>

                        <button onclick="checkDistortionAnswer()" class="check-distortion-btn">Detective Answer! üïµÔ∏è</button>

                        <div id="distortion-feedback" class="distortion-feedback"></div>

                        <div class="detection-controls">
                            <button onclick="nextDistortionStory()" class="next-story-btn">Next Mystery ‚Üí</button>
                            <div id="detective-score" class="detective-score">Detective Score: 0/0</div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="clean-ripple-workshop">
                <h2>üßº Clean Ripple Workshop</h2>

                <div class="workshop-interface">
                    <h3>Transform Distorted Messages into Clean Ones!</h3>
                    <p>Practice rewriting distorted messages to make them neutral and clear.</p>

                    <div class="message-transformer">
                        <div class="distorted-message">
                            <h4>üò§ Distorted Message</h4>
                            <div id="messy-message" class="message-box distorted">
                                "I can't believe you didn't help me with this stupid project when you know I'm terrible at this stuff!"
                            </div>
                        </div>

                        <div class="transformation-arrow">‚Üì Transform ‚Üì</div>

                        <div class="clean-message">
                            <h4>üòå Your Clean Version</h4>
                            <textarea id="clean-version" class="message-input" placeholder="Rewrite the message above to be neutral and clear..."></textarea>
                        </div>

                        <button onclick="getCleaningSuggestion()" class="get-suggestion-btn">Get Cleaning Tips! ‚ú®</button>

                        <div id="cleaning-suggestion" class="cleaning-suggestion"></div>

                        <button onclick="loadNewMessyMessage()" class="new-message-btn">Try Another Message ‚Üí</button>
                    </div>
                </div>
            </section>

            <section class="neutrality-toolbox">
                <h2>üß∞ Your Neutrality Toolbox</h2>

                <div class="toolbox-container">
                    <h3>7 Tools to Stay Neutral</h3>

                    <div class="tools-grid">
                        <div class="tool-card">
                            <div class="tool-icon">ü´Å</div>
                            <h4>The 3-Breath Reset</h4>
                            <p>Take 3 slow, deep breaths before responding to emotional situations</p>
                            <div class="tool-practice">
                                <button onclick="startBreathingExercise()" class="practice-btn">Practice Now</button>
                                <div id="breathing-guide" class="breathing-guide"></div>
                            </div>
                        </div>

                        <div class="tool-card">
                            <div class="tool-icon">‚è∏Ô∏è</div>
                            <h4>The Pause Power</h4>
                            <p>Wait 3 seconds before responding to give your brain time to choose neutral words</p>
                            <div class="tool-practice">
                                <div class="pause-timer">
                                    <button onclick="startPauseTimer()" class="practice-btn">Practice Pause</button>
                                    <div id="pause-display" class="timer-display">Ready to pause...</div>
                                </div>
                            </div>
                        </div>

                        <div class="tool-card">
                            <div class="tool-icon">üéØ</div>
                            <h4>The Focus Question</h4>
                            <p>Ask yourself: "What do I actually want to communicate?" before speaking</p>
                            <div class="focus-examples">
                                <div class="focus-example">Instead of: "This is so unfair!"</div>
                                <div class="focus-example">Say: "I feel confused about this situation."</div>
                            </div>
                        </div>

                        <div class="tool-card">
                            <div class="tool-icon">üìç</div>
                            <h4>The Fact Focus</h4>
                            <p>Stick to facts instead of opinions or emotions</p>
                            <div class="fact-examples">
                                <div class="opinion">Opinion: "You never listen to me!"</div>
                                <div class="fact">Fact: "I'd like to share something with you."</div>
                            </div>
                        </div>

                        <div class="tool-card">
                            <div class="tool-icon">üó£Ô∏è</div>
                            <h4>The "I" Statements</h4>
                            <p>Talk about your own feelings instead of blaming others</p>
                            <div class="statement-examples">
                                <div class="blame">Blame: "You made me angry!"</div>
                                <div class="i-statement">"I" Statement: "I felt frustrated when that happened."</div>
                            </div>
                        </div>

                        <div class="tool-card">
                            <div class="tool-icon">üéµ</div>
                            <h4>The Tone Check</h4>
                            <p>Pay attention to HOW you say something, not just WHAT you say</p>
                            <div class="tone-practice">
                                <button onclick="practiceTone()" class="practice-btn">Tone Practice</button>
                                <div id="tone-feedback" class="tone-feedback"></div>
                            </div>
                        </div>

                        <div class="tool-card">
                            <div class="tool-icon">‚ùì</div>
                            <h4>The Curious Question</h4>
                            <p>When confused, ask questions instead of making assumptions</p>
                            <div class="question-examples">
                                <div class="assumption">Assumption: "You don't care about this."</div>
                                <div class="question">Question: "How do you feel about this?"</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="daily-neutrality-challenge">
                <h2>üèÜ 7-Day Neutrality Challenge</h2>

                <div class="challenge-container">
                    <h3>Master Neutrality One Day at a Time!</h3>
                    <p>Each day, practice one neutrality tool. Check off each day as you complete it!</p>

                    <div class="challenge-days">
                        <div class="challenge-day">
                            <div class="day-number">1</div>
                            <div class="day-task">
                                <h4>3-Breath Reset Day</h4>
                                <p>Practice taking 3 breaths before responding to any emotional situation</p>
                            </div>
                            <input type="checkbox" class="day-checkbox" id="neutralday1">
                            <label for="neutralday1">Completed! ‚úÖ</label>
                        </div>

                        <div class="challenge-day">
                            <div class="day-number">2</div>
                            <div class="day-task">
                                <h4>Pause Power Day</h4>
                                <p>Wait 3 seconds before responding to any request or question</p>
                            </div>
                            <input type="checkbox" class="day-checkbox" id="neutralday2">
                            <label for="neutralday2">Completed! ‚úÖ</label>
                        </div>

                        <div class="challenge-day">
                            <div class="day-number">3</div>
                            <div class="day-task">
                                <h4>Focus Question Day</h4>
                                <p>Ask "What do I want to communicate?" before important conversations</p>
                            </div>
                            <input type="checkbox" class="day-checkbox" id="neutralday3">
                            <label for="neutralday3">Completed! ‚úÖ</label>
                        </div>

                        <div class="challenge-day">
                            <div class="day-number">4</div>
                            <div class="day-task">
                                <h4>Fact Focus Day</h4>
                                <p>Stick to facts instead of opinions in all conversations</p>
                            </div>
                            <input type="checkbox" class="day-checkbox" id="neutralday4">
                            <label for="neutralday4">Completed! ‚úÖ</label>
                        </div>

                        <div class="challenge-day">
                            <div class="day-number">5</div>
                            <div class="day-task">
                                <h4>"I" Statements Day</h4>
                                <p>Use "I feel..." instead of "You always..." in conversations</p>
                            </div>
                            <input type="checkbox" class="day-checkbox" id="neutralday5">
                            <label for="neutralday5">Completed! ‚úÖ</label>
                        </div>

                        <div class="challenge-day">
                            <div class="day-number">6</div>
                            <div class="day-task">
                                <h4>Tone Check Day</h4>
                                <p>Pay special attention to your tone of voice all day</p>
                            </div>
                            <input type="checkbox" class="day-checkbox" id="neutralday6">
                            <label for="neutralday6">Completed! ‚úÖ</label>
                        </div>

                        <div class="challenge-day">
                            <div class="day-number">7</div>
                            <div class="day-task">
                                <h4>Curious Questions Day</h4>
                                <p>Ask questions instead of making assumptions about others</p>
                            </div>
                            <input type="checkbox" class="day-checkbox" id="neutralday7">
                            <label for="neutralday7">Completed! ‚úÖ</label>
                        </div>
                    </div>

                    <div class="progress-tracker">
                        <div class="progress-bar">
                            <div class="progress-fill" id="neutralityProgress"></div>
                        </div>
                        <div id="neutrality-progress-text" class="progress-text">0/7 days complete</div>
                    </div>
                </div>
            </section>

            <section class="chapter-summary">
                <h2>üìù What We Learned About Staying Clean and Neutral</h2>

                <div class="summary-points">
                    <div class="summary-point">
                        <div class="point-icon">üåÄ</div>
                        <p>Distortions are like funhouse mirrors that twist your ripples as they travel</p>
                    </div>

                    <div class="summary-point">
                        <div class="point-icon">üò§</div>
                        <p>There are 5 main types: Emotional, Noise, Gossip, Timing, and Assumption distortions</p>
                    </div>

                    <div class="summary-point">
                        <div class="point-icon">üòå</div>
                        <p>Neutrality is like being a calm lake - your ripples travel pure and clear</p>
                    </div>

                    <div class="summary-point">
                        <div class="point-icon">üß∞</div>
                        <p>You have 7 powerful tools to stay neutral in any situation</p>
                    </div>

                    <div class="summary-point">
                        <div class="point-icon">üéØ</div>
                        <p>Clean, neutral ripples create the strongest and most positive echoes</p>
                    </div>
                </div>

                <div class="next-preview">
                    <h3>üîÆ Coming Next: The Ripple Log</h3>
                    <p>In Chapter 5, we'll learn how to track your ripples like a scientist and discover amazing patterns!</p>
                </div>
            </section>
        </main>

        <footer>
            <div class="chapter-navigation">
                <a href="chapter3.html" class="nav-button prev">‚Üê Previous: The Laws of Ripples</a>
                <a href="chapter5.html" class="nav-button next">Next: The Ripple Log ‚Üí</a>
            </div>
        </footer>
    </div>

    <script>
        // Neutrality training scenarios
        const neutralityScenarios = [
            {
                situation: "Your friend borrowed your favorite book and returned it with coffee stains on the pages.",
                responses: [
                    { text: "I can't believe you ruined my book! You're so careless!", neutral: false },
                    { text: "I noticed there are some stains on the book. What happened?", neutral: true },
                    { text: "Whatever, I didn't want it back anyway.", neutral: false }
                ],
                explanation: "The neutral response asks for information without blame or sarcasm."
            },
            {
                situation: "Your group partner didn't finish their part of the project that's due tomorrow.",
                responses: [
                    { text: "You always leave everything to the last minute!", neutral: false },
                    { text: "I see your section isn't complete yet. How can we handle this?", neutral: true },
                    { text: "Fine, I'll do everything myself like always.", neutral: false }
                ],
                explanation: "The neutral response focuses on the current situation and looks for solutions."
            },
            {
                situation: "Someone cuts in front of you in the lunch line.",
                responses: [
                    { text: "Excuse me, I think you might not have seen that there's a line here.", neutral: true },
                    { text: "Hey! The line starts back there, genius!", neutral: false },
                    { text: "*Say nothing but glare angrily*", neutral: false }
                ],
                explanation: "The neutral response gives the benefit of the doubt and addresses the situation politely."
            }
        ];

        // Distortion detection stories
        const distortionStories = [
            {
                story: "Jake said 'Great job on the presentation' to Maria right after she tripped while walking to her seat. Maria heard sarcasm instead of the genuine compliment Jake intended.",
                correctDistortion: "timing",
                explanation: "This is Timing Distortion - Jake's compliment came right after an embarrassing moment, making it seem sarcastic."
            },
            {
                story: "Sam told one friend 'I think the new student seems nice.' By the end of the day, people were saying 'Sam said the new student is weird and talks too much.'",
                correctDistortion: "gossip", 
                explanation: "This is Gossip Distortion - the message got twisted as it passed through multiple people."
            },
            {
                story: "Lucy was frustrated about failing her math test when her mom asked 'How was school?' Lucy snapped 'Fine!' in an angry tone, making her mom think Lucy was mad at her.",
                correctDistortion: "emotional",
                explanation: "This is Emotional Distortion - Lucy's frustration about the test got mixed into her response to her mom."
            }
        ];

        // Messy messages for the cleaning workshop
        const messyMessages = [
            "I can't believe you didn't help me with this stupid project when you know I'm terrible at this stuff!",
            "You never listen to anything I say and you always interrupt me!",
            "This assignment is impossible and the teacher hates our class!",
            "Everyone else got invited to the party except me - they must think I'm weird!",
            "You're always on your phone and you don't care about spending time with me!"
        ];

        let currentNeutralScenario = 0;
        let selectedResponse = "";
        let neutralScore = 0;
        let neutralTotal = 0;

        let currentDistortionStory = 0;
        let selectedDistortion = "";
        let detectiveScore = 0;
        let detectiveTotal = 0;

        let currentMessyMessage = 0;

        // Load neutrality scenario
        function loadNeutralScenario() {
            const scenario = neutralityScenarios[currentNeutralScenario];
            document.getElementById('neutrality-scenario').innerHTML = `
                <div class="scenario-text">
                    <h4>Situation ${currentNeutralScenario + 1}:</h4>
                    <p>${scenario.situation}</p>
                    <p><strong>How would you respond?</strong></p>
                </div>
            `;

            const responseContainer = document.getElementById('response-buttons');
            responseContainer.innerHTML = "";

            scenario.responses.forEach((response, index) => {
                const button = document.createElement('button');
                button.className = 'response-btn';
                button.textContent = response.text;
                button.onclick = () => selectResponse(response, button);
                responseContainer.appendChild(button);
            });

            selectedResponse = "";
            document.getElementById('neutral-feedback').innerHTML = "";
        }

        function selectResponse(response, button) {
            document.querySelectorAll('.response-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            button.classList.add('selected');
            selectedResponse = response;
        }

        function checkNeutralAnswer() {
            if (!selectedResponse) {
                alert("Please select a response first!");
                return;
            }

            const scenario = neutralityScenarios[currentNeutralScenario];
            neutralTotal++;

            if (selectedResponse.neutral) {
                neutralScore++;
                showNeutralFeedback("üéâ Perfect! " + scenario.explanation, "correct");
            } else {
                showNeutralFeedback("Try again! " + scenario.explanation, "incorrect");
            }

            updateNeutralScore();
        }

        function showNeutralFeedback(message, type) {
            const feedback = `<div class="feedback ${type}">
                <p>${message}</p>
            </div>`;
            document.getElementById('neutral-feedback').innerHTML = feedback;
        }

        function nextNeutralScenario() {
            currentNeutralScenario = (currentNeutralScenario + 1) % neutralityScenarios.length;
            loadNeutralScenario();
        }

        function updateNeutralScore() {
            document.getElementById('neutral-score').textContent = `Neutrality Score: ${neutralScore}/${neutralTotal}`;
        }

        // Load distortion story
        function loadDistortionStory() {
            const story = distortionStories[currentDistortionStory];
            document.getElementById('distortion-story').innerHTML = `
                <div class="story-text">
                    <h4>Mystery ${currentDistortionStory + 1}:</h4>
                    <p>${story.story}</p>
                    <p><strong>What type of distortion happened?</strong></p>
                </div>
            `;

            document.querySelectorAll('.distortion-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            selectedDistortion = "";
            document.getElementById('distortion-feedback').innerHTML = "";
        }

        function selectDistortion(type) {
            document.querySelectorAll('.distortion-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            document.getElementById(type + 'Btn').classList.add('selected');
            selectedDistortion = type;
        }

        function checkDistortionAnswer() {
            if (!selectedDistortion) {
                alert("Please select a distortion type first!");
                return;
            }

            const story = distortionStories[currentDistortionStory];
            detectiveTotal++;

            if (selectedDistortion === story.correctDistortion) {
                detectiveScore++;
                showDistortionFeedback("üïµÔ∏è Excellent detective work! " + story.explanation, "correct");
            } else {
                showDistortionFeedback("Keep investigating! " + story.explanation, "incorrect");
            }

            updateDetectiveScore();
        }

        function showDistortionFeedback(message, type) {
            const feedback = `<div class="feedback ${type}">
                <p>${message}</p>
            </div>`;
            document.getElementById('distortion-feedback').innerHTML = feedback;
        }

        function nextDistortionStory() {
            currentDistortionStory = (currentDistortionStory + 1) % distortionStories.length;
            loadDistortionStory();
        }

        function updateDetectiveScore() {
            document.getElementById('detective-score').textContent = `Detective Score: ${detectiveScore}/${detectiveTotal}`;
        }

        // Clean message workshop
        function getCleaningSuggestion() {
            const userInput = document.getElementById('clean-version').value.trim();
            const suggestions = {
                0: {
                    suggestion: "Try removing emotional words like 'can't believe' and 'stupid'. Focus on what you actually need: help with the project.",
                    example: "Clean version: 'I'm struggling with this project and could use some help. Are you available to work on it together?'"
                },
                1: {
                    suggestion: "Replace 'never' and 'always' with specific examples. Use 'I' statements to express how you feel.",
                    example: "Clean version: 'I'd like to share something with you. I feel unheard when I get interrupted. Could we try taking turns?'"
                },
                2: {
                    suggestion: "Focus on what you can control instead of blaming the assignment or teacher. Ask for specific help.",
                    example: "Clean version: 'I'm finding this assignment challenging. Can you help me understand what's expected?'"
                }
            };

            const suggestion = suggestions[currentMessyMessage] || suggestions[0];

            document.getElementById('cleaning-suggestion').innerHTML = `
                <div class="suggestion-content">
                    <h4>‚ú® Cleaning Tips:</h4>
                    <p>${suggestion.suggestion}</p>
                    <div class="example-clean">
                        <h5>üìù Example Clean Version:</h5>
                        <p>${suggestion.example}</p>
                    </div>
                    ${userInput ? `<div class="user-attempt"><h5>Your Attempt:</h5><p>"${userInput}"</p><p>Great effort! Keep practicing to make it even cleaner!</p></div>` : ''}
                </div>
            `;
        }

        function loadNewMessyMessage() {
            currentMessyMessage = (currentMessyMessage + 1) % messyMessages.length;
            document.getElementById('messy-message').textContent = messyMessages[currentMessyMessage];
            document.getElementById('clean-version').value = "";
            document.getElementById('cleaning-suggestion').innerHTML = "";
        }

        // Breathing exercise
        function startBreathingExercise() {
            const guide = document.getElementById('breathing-guide');
            guide.innerHTML = `
                <div class="breathing-animation">
                    <div class="breath-circle" id="breathCircle"></div>
                    <div class="breath-instruction" id="breathInstruction">Get ready...</div>
                </div>
            `;

            setTimeout(() => {
                document.getElementById('breathInstruction').textContent = "Breathe in...";
                document.getElementById('breathCircle').style.transform = "scale(1.5)";
            }, 1000);

            setTimeout(() => {
                document.getElementById('breathInstruction').textContent = "Hold...";
            }, 4000);

            setTimeout(() => {
                document.getElementById('breathInstruction').textContent = "Breathe out...";
                document.getElementById('breathCircle').style.transform = "scale(1)";
            }, 6000);

            setTimeout(() => {
                document.getElementById('breathInstruction').textContent = "Great job! You're more neutral now! üòå";
            }, 10000);
        }

        // Pause timer
        function startPauseTimer() {
            const display = document.getElementById('pause-display');
            let count = 3;

            display.textContent = `Pausing... ${count}`;

            const timer = setInterval(() => {
                count--;
                if (count > 0) {
                    display.textContent = `Pausing... ${count}`;
                } else {
                    display.textContent = "Perfect pause! Now you can respond thoughtfully! üéØ";
                    clearInterval(timer);
                }
            }, 1000);
        }

        // Challenge progress
        const neutralityCheckboxes = document.querySelectorAll('.day-checkbox');
        const neutralityProgressBar = document.getElementById('neutralityProgress');
        const neutralityProgressText = document.getElementById('neutrality-progress-text');

        neutralityCheckboxes.forEach(checkbox => {
            checkbox.addEventListener('change', updateNeutralityProgress);
        });

        function updateNeutralityProgress() {
            const completed = document.querySelectorAll('.day-checkbox:checked').length;
            const total = neutralityCheckboxes.length;
            const percentage = (completed / total) * 100;

            neutralityProgressBar.style.width = percentage + '%';
            neutralityProgressText.textContent = `${completed}/${total} days complete`;

            if (completed === total) {
                neutralityProgressText.innerHTML = `üèÜ Neutrality Master! You've learned to keep your ripples pure! üèÜ`;
                celebrateNeutralityMastery();
            }
        }

        function celebrateNeutralityMastery() {
            // Simple celebration effect
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const emoji = ['üèÜ', '‚ö°', 'üòå', '‚ú®'][Math.floor(Math.random() * 4)];
                    const celebration = document.createElement('div');
                    celebration.innerHTML = emoji;
                    celebration.style.position = 'fixed';
                    celebration.style.left = Math.random() * 100 + 'vw';
                    celebration.style.top = '-50px';
                    celebration.style.fontSize = '2rem';
                    celebration.style.pointerEvents = 'none';
                    celebration.style.zIndex = '1000';
                    celebration.style.animation = 'fall 3s linear forwards';
                    document.body.appendChild(celebration);

                    setTimeout(() => {
                        document.body.removeChild(celebration);
                    }, 3000);
                }, i * 100);
            }
        }

        // Initialize games
        loadNeutralScenario();
        loadDistortionStory();
    </script>

    <style>
        .mirror-demo {
            background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);
            padding: 3rem;
            border-radius: 20px;
            margin: 2rem 0;
            border: 3px solid #9C27B0;
        }

        .mirrors-comparison {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .normal-mirror, .funhouse-mirror {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .normal-mirror {
            border-top: 5px solid #4CAF50;
        }

        .funhouse-mirror {
            border-top: 5px solid #f44336;
        }

        .mirror-reflection {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1rem 0;
        }

        .original, .reflection {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            margin: 0.5rem 0;
            border: 2px solid #e0e0e0;
        }

        .reflection.distorted {
            border-color: #f44336;
            color: #f44336;
        }

        .distortion-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .distortion-card {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            border-top: 5px solid #FF9800;
        }

        .distortion-icon {
            font-size: 3rem;
            text-align: center;
            margin-bottom: 1rem;
        }

        .example, .fix {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
        }

        .example {
            border-left: 4px solid #f44336;
        }

        .fix {
            border-left: 4px solid #4CAF50;
        }

        .neutrality-explanation {
            background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c8 100%);
            padding: 3rem;
            border-radius: 20px;
            margin: 2rem 0;
            border: 3px solid #4CAF50;
        }

        .neutrality-demo {
            margin: 2rem 0;
        }

        .states-comparison {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .non-neutral, .neutral {
            text-align: center;
            padding: 2rem;
            border-radius: 15px;
        }

        .non-neutral {
            background: rgba(244, 67, 54, 0.1);
        }

        .neutral {
            background: rgba(76, 175, 80, 0.1);
        }

        .lake-surface {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            margin: 1rem auto;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .lake-surface.choppy {
            background: radial-gradient(circle, #ffcdd2 0%, #f44336 100%);
            animation: choppy 2s infinite;
        }

        .lake-surface.calm {
            background: radial-gradient(circle, #c8e6c8 0%, #4CAF50 100%);
        }

        @keyframes choppy {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .ripple-text {
            position: absolute;
            bottom: -50px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.9em;
            font-weight: bold;
        }

        .neutrality-benefits {
            margin-top: 2rem;
        }

        .benefits-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .benefit {
            background: rgba(76, 175, 80, 0.1);
            padding: 1rem;
            border-radius: 10px;
            border-left: 4px solid #4CAF50;
        }

        .training-interface, .detector-interface, .workshop-interface {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            padding: 3rem;
            border-radius: 20px;
            margin: 3rem 0;
            border: 3px solid #2196F3;
        }

        .scenario-display, .story-display {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .response-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
            margin: 2rem 0;
        }

        .response-btn {
            background: white;
            border: 2px solid #2196F3;
            padding: 1.5rem;
            border-radius: 10px;
            cursor: pointer;
            text-align: left;
            transition: all 0.3s;
        }

        .response-btn:hover {
            background: #2196F3;
            color: white;
            transform: translateX(10px);
        }

        .response-btn.selected {
            background: #2196F3;
            color: white;
            box-shadow: 0 5px 15px rgba(33, 150, 243, 0.3);
        }

        .distortion-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .distortion-btn {
            background: white;
            border: 2px solid #FF9800;
            padding: 1rem;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .distortion-btn:hover, .distortion-btn.selected {
            background: #FF9800;
            color: white;
            transform: translateY(-2px);
        }

        .message-transformer {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            margin: 2rem 0;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .distorted-message, .clean-message {
            margin: 2rem 0;
        }

        .message-box {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1rem 0;
        }

        .message-box.distorted {
            border-left: 5px solid #f44336;
            color: #f44336;
        }

        .message-input {
            width: 100%;
            min-height: 100px;
            padding: 1rem;
            border: 2px solid #4CAF50;
            border-radius: 10px;
            font-family: inherit;
            margin: 1rem 0;
            resize: vertical;
        }

        .transformation-arrow {
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: #4CAF50;
            margin: 1rem 0;
        }

        .cleaning-suggestion {
            background: #e8f5e8;
            padding: 2rem;
            border-radius: 10px;
            margin: 2rem 0;
            border-left: 5px solid #4CAF50;
        }

        .suggestion-content h4 {
            color: #4CAF50;
            margin-bottom: 1rem;
        }

        .example-clean {
            background: rgba(76, 175, 80, 0.1);
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
        }

        .user-attempt {
            background: rgba(33, 150, 243, 0.1);
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
        }

        .toolbox-container {
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
            padding: 3rem;
            border-radius: 20px;
            margin: 3rem 0;
            border: 3px solid #FF9800;
        }

        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .tool-card {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            text-align: center;
            border-top: 5px solid #FF9800;
        }

        .tool-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .tool-practice {
            margin-top: 1.5rem;
        }

        .practice-btn {
            background: #FF9800;
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 20px;
            cursor: pointer;
            margin: 0.5rem 0;
        }

        .breathing-guide {
            margin-top: 1rem;
        }

        .breathing-animation {
            text-align: center;
            padding: 2rem;
        }

        .breath-circle {
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, #4CAF50, #45a049);
            border-radius: 50%;
            margin: 1rem auto;
            transition: transform 3s ease-in-out;
        }

        .breath-instruction {
            font-weight: bold;
            font-size: 1.2em;
            color: #4CAF50;
            margin-top: 1rem;
        }

        .pause-timer {
            text-align: center;
        }

        .timer-display {
            font-weight: bold;
            font-size: 1.2em;
            color: #2196F3;
            margin-top: 1rem;
        }

        .focus-examples, .fact-examples, .statement-examples, .question-examples {
            text-align: left;
            margin-top: 1rem;
        }

        .focus-example, .opinion, .fact, .blame, .i-statement, .assumption, .question {
            background: #f8f9fa;
            padding: 0.8rem;
            border-radius: 8px;
            margin: 0.5rem 0;
        }

        .opinion, .blame, .assumption {
            border-left: 4px solid #f44336;
            color: #f44336;
        }

        .fact, .i-statement, .question {
            border-left: 4px solid #4CAF50;
            color: #4CAF50;
        }

        .challenge-container {
            background: linear-gradient(135deg, #f1f8e9 0%, #dcedc8 100%);
            padding: 3rem;
            border-radius: 20px;
            margin: 3rem 0;
            border: 3px solid #4CAF50;
        }

        .challenge-days {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .challenge-day {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .day-number {
            background: #4CAF50;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.5em;
            flex-shrink: 0;
        }

        .day-task {
            flex-grow: 1;
        }

        .day-task h4 {
            color: #4CAF50;
            margin-bottom: 0.5rem;
        }

        .progress-tracker {
            margin-top: 3rem;
        }

        .progress-bar {
            background: #E8F5E8;
            height: 25px;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .progress-fill {
            background: linear-gradient(90deg, #4CAF50, #66BB6A);
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 15px;
        }

        .progress-text {
            text-align: center;
            font-weight: bold;
            font-size: 1.3em;
            color: #4CAF50;
        }

        .summary-points {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .summary-point {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            text-align: center;
            border-top: 5px solid #4ECDC4;
        }

        .point-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .next-preview {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 2rem;
            border-radius: 20px;
            margin: 2rem 0;
            border: 3px solid #FF69B4;
        }

        .feedback {
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1rem 0;
        }

        .feedback.correct {
            background: #e8f5e8;
            border-left: 5px solid #4CAF50;
            color: #2E7D32;
        }

        .feedback.incorrect {
            background: #ffebee;
            border-left: 5px solid #f44336;
            color: #C62828;
        }

        .training-controls, .detection-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 2rem;
        }

        .check-neutral-btn, .check-distortion-btn, .get-suggestion-btn, .new-message-btn {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 25px;
            font-size: 1.1em;
            cursor: pointer;
            margin: 1rem 0;
        }

        .get-suggestion-btn {
            background: linear-gradient(135deg, #FF9800, #F57C00);
        }

        .next-neutral-btn, .next-story-btn {
            background: #2196F3;
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 20px;
            cursor: pointer;
        }

        .neutral-score, .detective-score {
            font-weight: bold;
            font-size: 1.2em;
            color: #4CAF50;
        }

        @keyframes fall {
            to {
                transform: translateY(100vh);
                opacity: 0;
            }
        }

        @media (max-width: 768px) {
            .mirrors-comparison {
                grid-template-columns: 1fr;
            }

            .distortion-grid {
                grid-template-columns: 1fr;
            }

            .states-comparison {
                grid-template-columns: 1fr;
            }

            .tools-grid {
                grid-template-columns: 1fr;
            }

            .challenge-days {
                grid-template-columns: 1fr;
            }
        }
    </style>
</body>
</html>